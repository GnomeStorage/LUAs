local player = game:GetService("Players").LocalPlayer
local gui = player:WaitForChild("PlayerGui")

-- Clean up old UI
if gui:FindFirstChild("FakeDisconnectUI") then
	gui.FakeDisconnectUI:Destroy()
end

-- Main ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FakeDisconnectUI"
screenGui.IgnoreGuiInset = true
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = gui

-- Input blocker (this makes everything unclickable except modal)
local inputBlocker = Instance.new("TextButton")
inputBlocker.Size = UDim2.new(1, 0, 1, 0)
inputBlocker.Position = UDim2.new(0, 0, 0, 0)
inputBlocker.BackgroundTransparency = 1
inputBlocker.Text = ""
inputBlocker.AutoButtonColor = false
inputBlocker.Modal = true -- Blocks all input
inputBlocker.ZIndex = 999
inputBlocker.Parent = screenGui

-- Dark overlay
local overlay = Instance.new("Frame")
overlay.Size = UDim2.new(1, 0, 1, 0)
overlay.Position = UDim2.new(0, 0, 0, 0)
overlay.BackgroundColor3 = Color3.new(0, 0, 0)
overlay.BackgroundTransparency = 0.45
overlay.ZIndex = 1000
overlay.Parent = screenGui

-- Injecting Frame
local injectFrame = Instance.new("Frame")
injectFrame.Size = UDim2.new(0.5, 0, 0.2, 0)
injectFrame.Position = UDim2.new(0.25, 0, 0.4, 0)
injectFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
injectFrame.BorderSizePixel = 0
injectFrame.ZIndex = 1001
injectFrame.Parent = screenGui

local injectText = Instance.new("TextLabel")
injectText.Size = UDim2.new(1, 0, 1, 0)
injectText.BackgroundTransparency = 1
injectText.Text = "Injecting script..."
injectText.TextColor3 = Color3.new(1, 1, 1)
injectText.Font = Enum.Font.SourceSansBold
injectText.TextScaled = true
injectText.ZIndex = 1002
injectText.Parent = injectFrame

local spinner = Instance.new("ImageLabel")
spinner.Size = UDim2.new(0, 40, 0, 40)
spinner.Position = UDim2.new(0.5, -20, 1, -50)
spinner.BackgroundTransparency = 1
spinner.Image = "rbxassetid://10493257496"
spinner.ZIndex = 1003
spinner.Parent = injectFrame

-- Spin loop
local spinning = true
task.spawn(function()
	while spinning do
		spinner.Rotation += 10
		task.wait(0.03)
	end
end)

-- Prompt function
local function showPrompt(text)
	spinning = false
	injectFrame.Visible = false

	local modal = Instance.new("Frame")
	modal.Size = UDim2.new(0.6, 0, 0.3, 0)
	modal.Position = UDim2.new(0.2, 0, 0.35, 0)
	modal.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
	modal.ZIndex = 1004
	modal.Parent = screenGui

	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1, 0, 0.3, 0)
	title.Text = "Disconnected"
	title.TextColor3 = Color3.new(1, 1, 1)
	title.Font = Enum.Font.SourceSansBold
	title.TextScaled = true
	title.BackgroundTransparency = 1
	title.ZIndex = 1005
	title.Parent = modal

	local body = Instance.new("TextLabel")
	body.Size = UDim2.new(1, -20, 0.3, 0)
	body.Position = UDim2.new(0, 10, 0.3, 0)
	body.Text = text
	body.TextColor3 = Color3.new(0.9, 0.9, 0.9)
	body.Font = Enum.Font.SourceSans
	body.TextWrapped = true
	body.TextScaled = true
	body.BackgroundTransparency = 1
	body.ZIndex = 1005
	body.Parent = modal

	local yes = Instance.new("TextButton")
	yes.Size = UDim2.new(0.45, 0, 0.2, 0)
	yes.Position = UDim2.new(0.05, 0, 0.75, 0)
	yes.Text = "Yes"
	yes.TextColor3 = Color3.new(0, 0, 0)
	yes.BackgroundColor3 = Color3.fromRGB(220, 220, 220)
	yes.Font = Enum.Font.SourceSansBold
	yes.TextScaled = true
	yes.ZIndex = 1005
	yes.Parent = modal

	local no = Instance.new("TextButton")
	no.Size = UDim2.new(0.45, 0, 0.2, 0)
	no.Position = UDim2.new(0.5, 0, 0.75, 0)
	no.Text = "No"
	no.TextColor3 = Color3.new(1, 1, 1)
	no.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	no.Font = Enum.Font.SourceSansBold
	no.TextScaled = true
	no.ZIndex = 1005
	no.Parent = modal

	yes.MouseButton1Click:Connect(function()
		modal:Destroy()
		injectFrame.Visible = true
		injectText.Text = "Injecting script..."
		spinning = true
		task.spawn(function()
			while spinning do
				spinner.Rotation += 10
				task.wait(0.03)
			end
		end)
		task.wait(5)
		local messages = {
			"Failed to inject script. Want to try again?",
			"Slow internet connection. Want to reconnect?"
		}
		showPrompt(messages[math.random(1, #messages)])
	end)

	no.MouseButton1Click:Connect(function()
		-- Do nothing
	end)
end

-- Begin flow
task.delay(5, function()
	showPrompt("Would you like to inject scripts by BaconScripts?")
end)
