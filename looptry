-- Spinner "Injecting..." UI (with random failure reasons)
local function showInjectingSpinner(callback)
	local gui = createModalBase()

	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0, 400, 0, 120)
	frame.Position = UDim2.new(0.5, 0, 0.5, 0)
	frame.AnchorPoint = Vector2.new(0.5, 0.5)
	frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	frame.BorderSizePixel = 0
	frame.ZIndex = 3
	frame.Parent = gui
	Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 6)

	local label = Instance.new("TextLabel", frame)
	label.Size = UDim2.new(1, -20, 0.6, 0)
	label.Position = UDim2.new(0, 10, 0.2, 0)
	label.BackgroundTransparency = 1
	label.Text = "Injecting script, please wait momentarily..."
	label.Font = Enum.Font.Gotham
	label.TextColor3 = Color3.fromRGB(255, 255, 255)
	label.TextScaled = true
	label.TextWrapped = true
	label.ZIndex = 4
	label.Parent = frame

	createSpinner(frame)

	-- Wait then trigger failure
	task.delay(4, function()
		gui:Destroy()

		local reasons = {
			"Poor internet connection",
			"Executor is outdated",
			"Script signature blocked",
			"API handshake failed",
			"Missing dependencies",
			"Process interrupted",
			"Obfuscation mismatch",
			"Execution error (Code 503)"
		}

		local reason = reasons[math.random(1, #reasons)]
		callback(reason)
	end)
end

-- Loop with dynamic failure message
local function startLoop()
	showPrompt("Injecting Script", "Would you like to proceed?", function()
		showInjectingSpinner(function(reason)
			showPrompt("Failed to Inject Script", reason .. ".\nWould you like to try again?", function()
				startLoop()
			end)
		end)
	end)
end
