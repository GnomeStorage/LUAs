local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FakeDisconnectUI"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = player:WaitForChild("PlayerGui")

-- DARK FULLSCREEN BACKGROUND
local darkOverlay = Instance.new("Frame")
darkOverlay.Size = UDim2.new(1, 0, 1, 0)
darkOverlay.Position = UDim2.new(0, 0, 0, 0)
darkOverlay.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
darkOverlay.BackgroundTransparency = 0.4
darkOverlay.ZIndex = 0
darkOverlay.Active = true
darkOverlay.Selectable = false
darkOverlay.Parent = screenGui

-- FUNCTION TO CREATE PROMPT BOX
local function createDisconnectFrame(message, yesText, noText, yesCallback)
    screenGui:ClearAllChildren()
    darkOverlay.Parent = screenGui -- Re-add dark overlay

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0.35, 0, 0.25, 0)
    frame.Position = UDim2.new(0.325, 0, 0.375, 0)
    frame.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
    frame.BorderSizePixel = 0
    frame.ZIndex = 2
    frame.Parent = screenGui

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0.3, 0)
    title.Position = UDim2.new(0, 0, 0, 0)
    title.BackgroundTransparency = 1
    title.Text = "Disconnected"
    title.Font = Enum.Font.SourceSansBold
    title.TextSize = 28
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.ZIndex = 3
    title.Parent = frame

    local body = Instance.new("TextLabel")
    body.Size = UDim2.new(1, -40, 0.3, 0)
    body.Position = UDim2.new(0, 20, 0.3, 0)
    body.BackgroundTransparency = 1
    body.TextWrapped = true
    body.Text = message
    body.Font = Enum.Font.SourceSans
    body.TextSize = 20
    body.TextColor3 = Color3.fromRGB(200, 200, 200)
    body.ZIndex = 3
    body.Parent = frame

    local buttonYes = Instance.new("TextButton")
    buttonYes.Size = UDim2.new(0.4, 0, 0.2, 0)
    buttonYes.Position = UDim2.new(0.1, 0, 0.75, 0)
    buttonYes.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    buttonYes.Text = yesText or "Reconnect"
    buttonYes.Font = Enum.Font.SourceSansBold
    buttonYes.TextSize = 20
    buttonYes.TextColor3 = Color3.fromRGB(0, 0, 0)
    buttonYes.ZIndex = 3
    buttonYes.AutoButtonColor = true
    buttonYes.Parent = frame

    local buttonNo = Instance.new("TextButton")
    buttonNo.Size = UDim2.new(0.4, 0, 0.2, 0)
    buttonNo.Position = UDim2.new(0.5, 10, 0.75, 0)
    buttonNo.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    buttonNo.Text = noText or "Leave"
    buttonNo.Font = Enum.Font.SourceSansBold
    buttonNo.TextSize = 20
    buttonNo.TextColor3 = Color3.fromRGB(255, 255, 255)
    buttonNo.ZIndex = 3
    buttonNo.AutoButtonColor = true
    buttonNo.Parent = frame

    buttonYes.MouseButton1Click:Connect(function()
        if yesCallback then
            yesCallback()
        end
    end)

    buttonNo.MouseButton1Click:Connect(function()
        -- Do nothing (as requested)
    end)
end

-- INJECTION PHASE
local function showInjecting()
    screenGui:ClearAllChildren()
    darkOverlay.Parent = screenGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0.35, 0, 0.2, 0)
    frame.Position = UDim2.new(0.325, 0, 0.4, 0)
    frame.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
    frame.BorderSizePixel = 0
    frame.ZIndex = 2
    frame.Parent = screenGui

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = "Injecting script..."
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 24
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.ZIndex = 3
    label.Parent = frame

    local spinner = Instance.new("ImageLabel")
    spinner.Size = UDim2.new(0, 40, 0, 40)
    spinner.Position = UDim2.new(0.5, -20, 0.7, -20)
    spinner.BackgroundTransparency = 1
    spinner.Image = "rbxassetid://10493257496" -- Roblox loader spinner
    spinner.ZIndex = 3
    spinner.Parent = frame

    -- Spinner loop
    local spinning = true
    spawn(function()
        local rotation = 0
        while spinning do
            rotation = (rotation + 10) % 360
            spinner.Rotation = rotation
            wait(0.05)
        end
    end)

    wait(5)
    spinning = false

    -- Looping back to fake error messages
    local messages = {
        "Failed to inject script. Want to try again?",
        "Slow internet connection. Want to reconnect?"
    }
    local randomMsg = messages[math.random(1, #messages)]

    createDisconnectFrame(randomMsg, "Yes", "No", showInjecting)
end

-- INITIAL UI
createDisconnectFrame(
    "Would you like to inject scripts by BaconScripts?",
    "Yes",
    "No",
    showInjecting
)
