-- Fake Script Injection UI Loop

local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer

-- Create the ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FakeInjectionPrompt"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Fullscreen input blocker frame (dark semi-transparent)
local blocker = Instance.new("Frame")
blocker.Name = "Blocker"
blocker.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
blocker.BackgroundTransparency = 0.6
blocker.Size = UDim2.new(1, 0, 1, 0)
blocker.Position = UDim2.new(0, 0, 0, 0)
blocker.Parent = screenGui
blocker.ZIndex = 10
blocker.Active = true
blocker.Selectable = true

-- Centered main prompt frame
local promptFrame = Instance.new("Frame")
promptFrame.Name = "PromptFrame"
promptFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
promptFrame.BorderSizePixel = 0
promptFrame.Size = UDim2.new(0, 350, 0, 180)
promptFrame.AnchorPoint = Vector2.new(0.5, 0.5)
promptFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
promptFrame.Parent = blocker
promptFrame.ZIndex = 11
promptFrame.ClipsDescendants = true
promptFrame.Rotation = 0

-- UI corner rounding
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = promptFrame

-- Title label
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Text = "Script Injection"
title.Font = Enum.Font.GothamBold
title.TextSize = 24
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.BackgroundTransparency = 1
title.Size = UDim2.new(1, -40, 0, 40)
title.Position = UDim2.new(0, 20, 0, 15)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = promptFrame

-- Info label
local info = Instance.new("TextLabel")
info.Name = "Info"
info.Text = "Are you sure you want to inject the script?"
info.Font = Enum.Font.Gotham
info.TextSize = 18
info.TextColor3 = Color3.fromRGB(200, 200, 200)
info.BackgroundTransparency = 1
info.Size = UDim2.new(1, -40, 0, 30)
info.Position = UDim2.new(0, 20, 0, 60)
info.TextXAlignment = Enum.TextXAlignment.Left
info.Parent = promptFrame

-- Countdown label
local countdownLabel = Instance.new("TextLabel")
countdownLabel.Name = "Countdown"
countdownLabel.Text = ""
countdownLabel.Font = Enum.Font.GothamBold
countdownLabel.TextSize = 14
countdownLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
countdownLabel.BackgroundTransparency = 1
countdownLabel.Size = UDim2.new(1, -40, 0, 20)
countdownLabel.Position = UDim2.new(0, 20, 0, 95)
countdownLabel.TextXAlignment = Enum.TextXAlignment.Left
countdownLabel.Parent = promptFrame

-- Buttons container
local buttonsFrame = Instance.new("Frame")
buttonsFrame.Name = "Buttons"
buttonsFrame.Size = UDim2.new(1, -40, 0, 50)
buttonsFrame.Position = UDim2.new(0, 20, 1, -70)
buttonsFrame.BackgroundTransparency = 1
buttonsFrame.Parent = promptFrame

-- Yes Button (white background, black text)
local yesButton = Instance.new("TextButton")
yesButton.Name = "YesButton"
yesButton.Text = "Yes"
yesButton.Font = Enum.Font.GothamBold
yesButton.TextSize = 18
yesButton.TextColor3 = Color3.fromRGB(0, 0, 0)
yesButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
yesButton.Size = UDim2.new(0.45, 0, 1, 0)
yesButton.Position = UDim2.new(0, 0, 0, 0)
yesButton.AutoButtonColor = false
yesButton.Parent = buttonsFrame

local yesCorner = Instance.new("UICorner")
yesCorner.CornerRadius = UDim.new(0, 8)
yesCorner.Parent = yesButton

-- No Button (black background, white text)
local noButton = Instance.new("TextButton")
noButton.Name = "NoButton"
noButton.Text = "No"
noButton.Font = Enum.Font.GothamBold
noButton.TextSize = 18
noButton.TextColor3 = Color3.fromRGB(255, 255, 255)
noButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
noButton.Size = UDim2.new(0.45, 0, 1, 0)
noButton.Position = UDim2.new(0.55, 0, 0, 0)
noButton.AutoButtonColor = false
noButton.Parent = buttonsFrame

local noCorner = Instance.new("UICorner")
noCorner.CornerRadius = UDim.new(0, 8)
noCorner.Parent = noButton

-- Failure reasons pool (only two reasons)
local failReasons = {
    "Poor internet connection",
    "Executor outdated"
}

-- Function to pick a random fail reason
local function getRandomFailReason()
    return failReasons[math.random(1, #failReasons)]
end

-- Tween helper for fade in/out
local function tweenTransparency(obj, goal, time)
    local tween = TweenService:Create(obj, TweenInfo.new(time, Enum.EasingStyle.Quad), goal)
    tween:Play()
    return tween
end

-- Loop logic
local loopTime = 10 -- seconds
local running = true

local function runLoop()
    while running do
        -- Reset prompt rotation
        promptFrame.Rotation = 0

        info.Text = "Are you sure you want to inject the script?"
        countdownLabel.Text = "Auto retry in " .. tostring(loopTime) .. " seconds..."

        local startTime = tick()
        while tick() - startTime < loopTime do
            local remaining = math.ceil(loopTime - (tick() - startTime))
            countdownLabel.Text = "Auto retry in " .. tostring(remaining) .. " seconds..."
            wait(1)
        end

        -- Animate failure - shake and update text
        local failReason = getRandomFailReason()
        info.Text = "Injection failed: " .. failReason

        -- Shake prompt
        for i = 1, 6 do
            local angle = (i % 2 == 0) and 6 or -6
            TweenService:Create(promptFrame, TweenInfo.new(0.07, Enum.EasingStyle.Linear), {Rotation = angle}):Play()
            wait(0.07)
        end
        TweenService:Create(promptFrame, TweenInfo.new(0.1, Enum.EasingStyle.Quad), {Rotation = 0}):Play()
        wait(1)
    end
end

-- Connect buttons
yesButton.MouseButton1Click:Connect(function()
    -- Pretend to inject successfully
    info.Text = "Injection successful!"
    countdownLabel.Text = ""
    running = false
    -- Fade out the UI after 1 second
    tweenTransparency(blocker, {BackgroundTransparency = 1}, 1)
    tweenTransparency(promptFrame, {BackgroundTransparency = 1}, 1)
    wait(1)
    screenGui:Destroy()
end)

noButton.MouseButton1Click:Connect(function()
    running = false
    screenGui:Destroy()
end)

-- Prevent closing by ESC or other input
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.Escape then
        -- block escape
    end
end)

-- Start loop coroutine
coroutine.wrap(runLoop)()
