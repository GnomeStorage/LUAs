-- Cleanup any existing UI
pcall(function() game:GetService("CoreGui").InjectionUI:Destroy() end)

-- Setup
local CoreGui = (gethui and gethui()) or game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local reasons = {
    "Poor internet connection.",
    "Executor outdated.",
    "Script signature invalid.",
    "Injection environment unstable.",
    "Unknown error occurred.",
}

-- Create ScreenGui
local gui = Instance.new("ScreenGui")
gui.Name = "InjectionUI"
gui.IgnoreGuiInset = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Global
gui.ResetOnSpawn = false
gui.Parent = CoreGui

-- Blackout background
local blur = Instance.new("Frame")
blur.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
blur.BackgroundTransparency = 0.3
blur.Size = UDim2.new(1, 0, 1, 0)
blur.ZIndex = 1
blur.Parent = gui

-- Main Prompt Container
local container = Instance.new("Frame")
container.Size = UDim2.new(0, 400, 0, 200)
container.Position = UDim2.new(0.5, -200, 0.5, -100)
container.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
container.BorderSizePixel = 0
container.ZIndex = 2
container.AnchorPoint = Vector2.new(0.5, 0.5)
container.Parent = gui

-- Round corners
local corner = Instance.new("UICorner", container)
corner.CornerRadius = UDim.new(0, 10)

-- UI Padding
local padding = Instance.new("UIPadding", container)
padding.PaddingTop = UDim.new(0, 20)
padding.PaddingBottom = UDim.new(0, 20)
padding.PaddingLeft = UDim.new(0, 20)
padding.PaddingRight = UDim.new(0, 20)

-- Text Label
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 50)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.Text = "Injecting Script"
title.ZIndex = 2
title.Parent = container

-- Subtitle
local subtitle = Instance.new("TextLabel")
subtitle.Size = UDim2.new(1, 0, 0, 40)
subtitle.Position = UDim2.new(0, 0, 0, 50)
subtitle.BackgroundTransparency = 1
subtitle.TextColor3 = Color3.fromRGB(200, 200, 200)
subtitle.TextScaled = true
subtitle.Font = Enum.Font.Gotham
subtitle.Text = "Would you like to proceed?"
subtitle.ZIndex = 2
subtitle.Parent = container

-- Buttons container
local btnHolder = Instance.new("Frame")
btnHolder.Size = UDim2.new(1, 0, 0, 50)
btnHolder.Position = UDim2.new(0, 0, 1, -60)
btnHolder.BackgroundTransparency = 1
btnHolder.ZIndex = 2
btnHolder.Parent = container

local uiList = Instance.new("UIListLayout", btnHolder)
uiList.FillDirection = Enum.FillDirection.Horizontal
uiList.HorizontalAlignment = Enum.HorizontalAlignment.Center
uiList.Padding = UDim.new(0, 20)

-- Create buttons
local function createButton(text, color, textColor)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0.4, 0, 1, 0)
	btn.BackgroundColor3 = color
	btn.TextColor3 = textColor
	btn.TextScaled = true
	btn.Font = Enum.Font.GothamBold
	btn.Text = text
	btn.ZIndex = 2

	local btnCorner = Instance.new("UICorner", btn)
	btnCorner.CornerRadius = UDim.new(0, 6)

	return btn
end

local yesButton = createButton("Yes", Color3.fromRGB(255, 255, 255), Color3.fromRGB(0, 0, 0))
local noButton = createButton("No", Color3.fromRGB(0, 0, 0), Color3.fromRGB(255, 255, 255))

yesButton.Parent = btnHolder
noButton.Parent = btnHolder

-- Spinner
local spinner = Instance.new("TextLabel")
spinner.Size = UDim2.new(1, 0, 0, 40)
spinner.Position = UDim2.new(0, 0, 0, 100)
spinner.BackgroundTransparency = 1
spinner.TextColor3 = Color3.fromRGB(180, 180, 180)
spinner.TextScaled = true
spinner.Font = Enum.Font.Gotham
spinner.Text = ""
spinner.ZIndex = 2
spinner.Parent = container

-- Fake Loop
local function startLoop()
	task.spawn(function()
		while true do
			title.Text = "Injecting script please wait momentarily..."
			subtitle.Text = ""
			spinner.Text = "|"
			task.wait(0.2)
			spinner.Text = "/"
			task.wait(0.2)
			spinner.Text = "-"
			task.wait(0.2)
			spinner.Text = "\\"
			task.wait(0.2)

			local reason = reasons[math.random(1, #reasons)]
			title.Text = "Failed to Inject Script"
			subtitle.Text = "Reason: " .. reason .. "\nWould you like to try again?"
			spinner.Text = ""

			repeat task.wait() until yesButton:IsPressed()
		end
	end)
end

-- Button functionality
yesButton.MouseButton1Click:Connect(function()
	title.Text = "Injecting script please wait momentarily..."
	subtitle.Text = ""
	spinner.Text = "|"
	startLoop()
end)

-- No button is just clickable, does nothing
noButton.MouseButton1Click:Connect(function() end)
